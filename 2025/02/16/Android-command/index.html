<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/limxtop/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/limxtop/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2276020567327330" crossorigin="anonymous"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-QHV8ETBTFQ"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QHV8ETBTFQ")</script><link rel="alternate" type="application/rss+xml" title="若批评不自由，则赞美无意义" href="https://limxtop1989.github.io/limxtop/rss.xml"><link rel="alternate" type="application/atom+xml" title="若批评不自由，则赞美无意义" href="https://limxtop1989.github.io/limxtop/atom.xml"><link rel="alternate" type="application/json" title="若批评不自由，则赞美无意义" href="https://limxtop1989.github.io/limxtop/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/limxtop/css/app.css?v=0.2.5"><meta name="keywords" content="Android, adb, egrep, 正则表达式，"><link rel="canonical" href="https://limxtop1989.github.io/limxtop/2025/02/16/Android-command/"><title>Android 提升开发效率常用命令指南 - Android | Yume Shoka = 若批评不自由，则赞美无意义 = 有梦书架</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Android 提升开发效率常用命令指南</h1><div class="meta"><span class="item" title="Created: 2025-02-16 11:23:48"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2025-02-16T11:23:48+08:00">2025-02-16</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>18k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>16 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/limxtop/" rel="start">Yume Shoka</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/99fb5ff897a82984470abf5e2a235d94.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/46d0371c19c0586fb0629e97bac23133.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/49bee8cf2d93684cad9a1acc8bc17d8a.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/542168e8b4e90efcb8a5f76548f0365f.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/15ab06b7fe711067fca78ee15eb32391.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/1eaf2713d4a30c9691c9eaf4f898e499.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/limxtop/">Home</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/limxtop/categories/android/" itemprop="item" rel="index" title="In Android"><span itemprop="name">Android</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="https://limxtop1989.github.io/limxtop/2025/02/16/Android-command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/limxtop/images/avatar.jpg"><meta itemprop="name" content="文理兼修电脑首席"><meta itemprop="description" content="有梦书架, "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="若批评不自由，则赞美无意义"></span><div class="body md" itemprop="articleBody"><h1 id="概述"><a class="anchor" href="#概述">#</a> 概述</h1><p>工欲善其事，必先利其器。在 Android 开发过程中，命令行工具的使用能极大提升开发效率。命令行不仅能帮助开发者快速调试、自动化流程，还能在开发过程中快速定位问题、进行批量操作等，本文将详细展开介绍。</p><h1 id="log-过滤查询"><a class="anchor" href="#log-过滤查询">#</a> Log 过滤查询</h1><p>日志分析时，我们时常需要将包含某个关键字的日志过滤出来，如果只是在一个文件里，使用文本编辑器都可以实现目的。但如果需要高级的查询条件，特别是待分析的日志散落在多个目录下，或者需要实时过滤 <code>adb logcat -b all</code> 的输出时，命令行是最简洁高效。比如我们需要在多个日志文件里，将 “18:20: 任意多个字符 keyword1 &amp; 18:21: 任意多个字符 keyword1 &amp; keyword2” 的日志过滤高亮显示出来，如下命令即可。</p><pre><code class="language-Bash">egrep -irn --color '18:2[01]:.*keyword1|keyword2'
</code></pre><p>配合管道命令，就可以边操作，边实时过滤查看日志输出。代码怎么执行的，运行时逻辑大概一目了然。</p><p><code>adb logcat -b all | egrep -in --color 'keyword1|keyword2'</code></p><p>每个系统命令都可以在 terminal 通过 <code>man</code> 命令查询其 API，比如 <code>egrep</code> 输入 <code>man egrep</code> 获得其使用说明。</p><p>当然，我们平时在写代码是，同一个类的日志需要使用相同的 TAG， 日志要带上所在的方法名，这样光看日志，就知道程序执行的方法路径和逻辑。方法内的日志需要带上入参和返回值，这些都是比较好的实践。程序运行时的状态更是一目了然了，这样过滤命令更能高效地发挥作用</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TAG <span class="token operator">=</span> <span class="token string">"Foo"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token class-name">String</span> param1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"foo: param1="</span> <span class="token operator">+</span> param1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>❤️ <span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVndWxhcl9leHByZXNzaW9u">正则表达式</span><br>❤️ 做开发总是要学会英语，阅读英文资料的，如何一年半载掌握英语阅读能力，见<span class="exturl" data-url="aHR0cHM6Ly9iZXdhdGVycy5tZS8=">英语自学指南</span></p></blockquote><h1 id="文本替换"><a class="anchor" href="#文本替换">#</a> 文本替换</h1><p>我们可以使用 sed 命令来替换所有 Log.d 为 Log.i：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">"*.java"</span> -exec <span class="token function">sed</span> -i <span class="token string">'s/Log\.d/Log\.i/g'</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> +</pre></td></tr></table></figure><ul><li>find . -name &quot;*.java&quot;：查找所有 .java 文件。</li><li>-exec：对找到的文件执行后面的命令。</li><li>sed -i's/Log.d/Log.i/g'：在文件中替换 Log.d 为 Log.i，-i 表示直接修改文件。</li></ul><h1 id="查看当前-resume-的-activity"><a class="anchor" href="#查看当前-resume-的-activity">#</a> 查看当前 resume 的 Activity</h1><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell dumpsys activity activities <span class="token operator">|</span> <span class="token function">egrep</span> -in --color <span class="token string">'dumpsys activity activities'</span> -A <span class="token number">100</span></pre></td></tr></table></figure><p>日志输出如下：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">1</span>:ACTIVITY MANAGER ACTIVITIES <span class="token punctuation">(</span>dumpsys activity activities<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">2</span>-Display <span class="token comment">#0 (activities from top to bottom):</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">3</span>-  * Task<span class="token punctuation">&#123;</span>9cb2e7c <span class="token comment">#7568 type=standard A=10265:com.tencent.mm U=0 visible=true visibleRequested=true mode=fullscreen translucent=false sz=3&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">4</span>-    mLastPausedActivity: ActivityRecord<span class="token punctuation">&#123;</span>8d3b19b u0 com.tencent.mm/.plugin.offline.ui.WalletOfflineEntranceUI t-1 f<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">5</span>-    <span class="token assign-left variable">mLastNonFullscreenBounds</span><span class="token operator">=</span>Rect<span class="token punctuation">(</span><span class="token number">276</span>, <span class="token number">696</span> - <span class="token number">805</span>, <span class="token number">1776</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">6</span>-    <span class="token assign-left variable">isSleeping</span><span class="token operator">=</span>false</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">7</span>-    <span class="token assign-left variable">topResumedActivity</span><span class="token operator">=</span>ActivityRecord<span class="token punctuation">&#123;</span>3d295a u0 com.tencent.mm/.framework.app.UIPageFragmentActivity t7568<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">8</span>-    * Hist  <span class="token comment">#2: ActivityRecord&#123;3d295a u0 com.tencent.mm/.framework.app.UIPageFragmentActivity t7568&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">9</span>-      <span class="token assign-left variable">packageName</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">processName</span><span class="token operator">=</span>com.tencent.mm</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">10</span>-      <span class="token assign-left variable">launchedFromUid</span><span class="token operator">=</span><span class="token number">10265</span> <span class="token assign-left variable">launchedFromPackage</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">launchedFromFeature</span><span class="token operator">=</span>null <span class="token assign-left variable">userId</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">11</span>-      <span class="token assign-left variable">app</span><span class="token operator">=</span>ProcessRecord<span class="token punctuation">&#123;</span>94fb2cb <span class="token number">29639</span>:com.tencent.mm/u0a265<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token number">12</span>-      Intent <span class="token punctuation">&#123;</span> <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.tencent.mm/.framework.app.UIPageFragmentActivity <span class="token punctuation">(</span>has extras<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token number">13</span>-      <span class="token assign-left variable">rootOfTask</span><span class="token operator">=</span>false <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">&#123;</span>9cb2e7c <span class="token comment">#7568 type=standard A=10265:com.tencent.mm&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token number">14</span>-      <span class="token assign-left variable">taskAffinity</span><span class="token operator">=</span><span class="token number">10265</span>:com.tencent.mm</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">15</span>-      <span class="token assign-left variable">mActivityComponent</span><span class="token operator">=</span>com.tencent.mm/.framework.app.UIPageFragmentActivity</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token number">53</span>-    * Hist  <span class="token comment">#1: ActivityRecord&#123;c7145cd u0 com.tencent.mm/.plugin.mall.ui.MallIndexUIv2 t7568&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token number">54</span>-      <span class="token assign-left variable">packageName</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">processName</span><span class="token operator">=</span>com.tencent.mm</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">55</span>-      <span class="token assign-left variable">launchedFromUid</span><span class="token operator">=</span><span class="token number">10265</span> <span class="token assign-left variable">launchedFromPackage</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">launchedFromFeature</span><span class="token operator">=</span>null <span class="token assign-left variable">userId</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token number">56</span>-      <span class="token assign-left variable">app</span><span class="token operator">=</span>ProcessRecord<span class="token punctuation">&#123;</span>94fb2cb <span class="token number">29639</span>:com.tencent.mm/u0a265<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">57</span>-      Intent <span class="token punctuation">&#123;</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x20000000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.tencent.mm/.plugin.mall.ui.MallIndexUIv2 <span class="token punctuation">(</span>has extras<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">58</span>-      <span class="token assign-left variable">rootOfTask</span><span class="token operator">=</span>false <span class="token assign-left variable">task</span><span class="token operator">=</span>Task<span class="token punctuation">&#123;</span>9cb2e7c <span class="token comment">#7568 type=standard A=10265:com.tencent.mm&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token number">59</span>-      <span class="token assign-left variable">taskAffinity</span><span class="token operator">=</span><span class="token number">10265</span>:com.tencent.mm</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token number">60</span>-      <span class="token assign-left variable">mActivityComponent</span><span class="token operator">=</span>com.tencent.mm/.plugin.mall.ui.MallIndexUIv2</pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">98</span>-    * Hist  <span class="token comment">#0: ActivityRecord&#123;f0316e7 u0 com.tencent.mm/.ui.LauncherUI t7568&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token number">99</span>-      <span class="token assign-left variable">packageName</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">processName</span><span class="token operator">=</span>com.tencent.mm</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token number">100</span>-      <span class="token assign-left variable">launchedFromUid</span><span class="token operator">=</span><span class="token number">10265</span> <span class="token assign-left variable">launchedFromPackage</span><span class="token operator">=</span>com.tencent.mm <span class="token assign-left variable">launchedFromFeature</span><span class="token operator">=</span>null <span class="token assign-left variable">userId</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token number">101</span>-      <span class="token assign-left variable">app</span><span class="token operator">=</span>ProcessRecord<span class="token punctuation">&#123;</span>94fb2cb <span class="token number">29639</span>:com.tencent.mm/u0a265<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="查看当前-resume-的-fragment"><a class="anchor" href="#查看当前-resume-的-fragment">#</a> 查看当前 resume 的 Fragment</h1><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell dumpsys activity <span class="token function">top</span></pre></td></tr></table></figure><p>更多 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vdG9vbHMvZHVtcHN5cw==">dumpsys</span> 见链接和自行搜索。</p><h1 id="查看-activity-启动调度流程"><a class="anchor" href="#查看-activity-启动调度流程">#</a> 查看 Activity 启动调度流程</h1><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb logcat -b all <span class="token operator">|</span> <span class="token function">egrep</span> -in --color <span class="token string">'am_|wm_|activitytask|displayed'</span></pre></td></tr></table></figure><p>以桌面启动 wordcard 应用为例，日志输出：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">41911</span>:02-15 <span class="token number">22</span>:11:28.678  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_task_created: <span class="token number">7584</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">41915</span>:02-15 <span class="token number">22</span>:11:28.686  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_task_moved: <span class="token punctuation">[</span><span class="token number">7584,7584</span>,0,1,9<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">41916</span>:02-15 <span class="token number">22</span>:11:28.686  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_task_to_front: <span class="token punctuation">[</span><span class="token number">0,7584</span>,0<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token number">41917</span>:02-15 <span class="token number">22</span>:11:28.687  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_create_task: <span class="token punctuation">[</span><span class="token number">0,7584</span>,7584,0<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token number">41918</span>:02-15 <span class="token number">22</span>:11:28.687  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_create_activity: <span class="token punctuation">[</span><span class="token number">0,107658451</span>,7584,com.maxim.wordcard.free/com.maxim.wordcard.MainActivity,android.intent.action.MAIN,NULL,NULL,270532608<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">41919</span>:02-15 <span class="token number">22</span>:11:28.687  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_task_moved: <span class="token punctuation">[</span><span class="token number">7584,7584</span>,0,1,9<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">41921</span>:02-15 <span class="token number">22</span>:11:28.689  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_pause_activity: <span class="token punctuation">[</span><span class="token number">0,62924082</span>,com.google.android.apps.nexuslauncher/.NexusLauncherActivity,userLeaving<span class="token operator">=</span>true,pauseBackTasks<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">41923</span>:02-15 <span class="token number">22</span>:11:28.691  <span class="token number">1622</span>  <span class="token number">4086</span> I ActivityTaskManager: START u0 <span class="token punctuation">&#123;</span>act<span class="token operator">=</span>android.intent.action.MAIN <span class="token assign-left variable">cat</span><span class="token operator">=</span><span class="token punctuation">[</span>android.intent.category.LAUNCHER<span class="token punctuation">]</span> <span class="token assign-left variable">flg</span><span class="token operator">=</span>0x10200000 <span class="token assign-left variable">cmp</span><span class="token operator">=</span>com.maxim.wordcard.free/com.maxim.wordcard.MainActivity <span class="token assign-left variable">bnds</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">787,671</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1034,986</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span> with LAUNCH_MULTIPLE from uid <span class="token number">10232</span> <span class="token punctuation">(</span>BAL_ALLOW_ALLOWLISTED_COMPONENT<span class="token punctuation">)</span> result <span class="token assign-left variable">code</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token number">41928</span>:02-15 <span class="token number">22</span>:11:28.693  <span class="token number">1622</span>  <span class="token number">1782</span> I am_uid_running: <span class="token number">10320</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token number">41929</span>:02-15 <span class="token number">22</span>:11:28.693 <span class="token number">27385</span> <span class="token number">27385</span> I wm_on_top_resumed_lost_called: <span class="token punctuation">[</span><span class="token number">62924082</span>,com.google.android.apps.nexuslauncher.NexusLauncherActivity,topStateChangedWhenResumed<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">41937</span>:02-15 <span class="token number">22</span>:11:28.694 <span class="token number">27385</span> <span class="token number">27385</span> I wm_on_paused_called: <span class="token punctuation">[</span><span class="token number">62924082</span>,com.google.android.apps.nexuslauncher.NexusLauncherActivity,performPause,0<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token number">41938</span>:02-15 <span class="token number">22</span>:11:28.695  <span class="token number">1622</span>  <span class="token number">4091</span> I wm_add_to_stopping: <span class="token punctuation">[</span><span class="token number">0,62924082</span>,com.google.android.apps.nexuslauncher/.NexusLauncherActivity,makeInvisible<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token number">41945</span>:02-15 <span class="token number">22</span>:11:28.711  <span class="token number">1622</span>  <span class="token number">1809</span> I am_proc_start: <span class="token punctuation">[</span><span class="token number">0,2035</span>,10320,com.maxim.wordcard.free,next-top-activity,<span class="token punctuation">&#123;</span>com.maxim.wordcard.free/com.maxim.wordcard.MainActivity<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token number">41948</span>:02-15 <span class="token number">22</span>:11:28.720  <span class="token number">1622</span>  <span class="token number">1805</span> I am_pss  <span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token number">27027,10155</span>,com.google.android.googlequicksearchbox:search,185773056,120262656,48736256,273444864,0,3,20<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">41971</span>:02-15 <span class="token number">22</span>:11:28.732  <span class="token number">1622</span>  <span class="token number">4086</span> I am_proc_bound: <span class="token punctuation">[</span><span class="token number">0,2035</span>,com.maxim.wordcard.free<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token number">41976</span>:02-15 <span class="token number">22</span>:11:28.735  <span class="token number">1622</span>  <span class="token number">4086</span> I am_uid_active: <span class="token number">10320</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token number">42055</span>:02-15 <span class="token number">22</span>:11:28.871  <span class="token number">1622</span>  <span class="token number">1965</span> I am_unfreeze: <span class="token punctuation">[</span><span class="token number">27271</span>,com.google.android.adservices.api,6<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">42056</span>:02-15 <span class="token number">22</span>:11:28.871  <span class="token number">1622</span>  <span class="token number">4086</span> I am_uid_active: <span class="token number">10257</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token number">42081</span>:02-15 <span class="token number">22</span>:11:28.935  <span class="token number">1622</span>  <span class="token number">1965</span> I am_unfreeze: <span class="token punctuation">[</span><span class="token number">23781</span>,com.android.vending,6<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">42092</span>:02-15 <span class="token number">22</span>:11:28.969  <span class="token number">1622</span>  <span class="token number">4091</span> I am_uid_active: <span class="token number">10174</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">42093</span>:02-15 <span class="token number">22</span>:11:28.969  <span class="token number">1622</span>  <span class="token number">1965</span> I am_unfreeze: <span class="token punctuation">[</span><span class="token number">26122</span>,com.google.android.webview:webview_service,6<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token number">42100</span>:02-15 <span class="token number">22</span>:11:28.986  <span class="token number">1622</span>  <span class="token number">4091</span> I am_uid_running: <span class="token number">99529</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token number">42107</span>:02-15 <span class="token number">22</span>:11:28.998  <span class="token number">1622</span>  <span class="token number">1809</span> I am_proc_start: <span class="token punctuation">[</span><span class="token number">0,2196</span>,99529,com.google.android.webview:sandboxed_process0:org.chromium.content.app.SandboxedProcessService0:0,,<span class="token punctuation">&#123;</span>com.maxim.wordcard.free/org.chromium.content.app.SandboxedProcessService0:0<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">42118</span>:02-15 <span class="token number">22</span>:11:29.013  <span class="token number">1622</span>  <span class="token number">4086</span> I am_proc_bound: <span class="token punctuation">[</span><span class="token number">0,2196</span>,com.google.android.webview:sandboxed_process0:org.chromium.content.app.SandboxedProcessService0:0<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token number">42123</span>:02-15 <span class="token number">22</span>:11:29.028  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_restart_activity: <span class="token punctuation">[</span><span class="token number">0,107658451</span>,7584,com.maxim.wordcard.free/com.maxim.wordcard.MainActivity<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token number">42124</span>:02-15 <span class="token number">22</span>:11:29.029  <span class="token number">1622</span>  <span class="token number">4086</span> I wm_set_resumed_activity: <span class="token punctuation">[</span><span class="token number">0</span>,com.maxim.wordcard.free/com.maxim.wordcard.MainActivity,minimalResumeActivityLocked - onActivityStateChanged<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token number">42125</span>:02-15 <span class="token number">22</span>:11:29.030  <span class="token number">1622</span>  <span class="token number">4086</span> I am_uid_active: <span class="token number">99529</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token number">42151</span>:02-15 <span class="token number">22</span>:11:29.158  <span class="token number">2035</span>  <span class="token number">2035</span> I wm_on_create_called: <span class="token punctuation">[</span><span class="token number">107658451</span>,com.maxim.wordcard.MainActivity,performCreate,12<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token number">42153</span>:02-15 <span class="token number">22</span>:11:29.162  <span class="token number">2035</span>  <span class="token number">2035</span> I wm_on_start_called: <span class="token punctuation">[</span><span class="token number">107658451</span>,com.maxim.wordcard.MainActivity,handleStartActivity,4<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token number">42176</span>:02-15 <span class="token number">22</span>:11:29.229  <span class="token number">2035</span>  <span class="token number">2035</span> I wm_on_resume_called: <span class="token punctuation">[</span><span class="token number">107658451</span>,com.maxim.wordcard.MainActivity,RESUME_ACTIVITY,0<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token number">42178</span>:02-15 <span class="token number">22</span>:11:29.240  <span class="token number">2035</span>  <span class="token number">2035</span> I wm_on_top_resumed_gained_called: <span class="token punctuation">[</span><span class="token number">107658451</span>,com.maxim.wordcard.MainActivity,topStateChangedWhenResumed<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token number">42206</span>:02-15 <span class="token number">22</span>:11:29.268  <span class="token number">1622</span>  <span class="token number">1783</span> I wm_wallpaper_surface: <span class="token punctuation">[</span><span class="token number">0,0</span>,Window<span class="token punctuation">&#123;</span>277b556 u0 com.google.android.apps.nexuslauncher/com.google.android.apps.nexuslauncher.NexusLauncherActivity<span class="token punctuation">&#125;</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token number">42249</span>:02-15 <span class="token number">22</span>:11:29.328  <span class="token number">1622</span>  <span class="token number">1779</span> I wm_activity_launch_time: <span class="token punctuation">[</span><span class="token number">0,107658451</span>,com.maxim.wordcard.free/com.maxim.wordcard.MainActivity,661<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token number">42250</span>:02-15 <span class="token number">22</span>:11:29.328  <span class="token number">1622</span>  <span class="token number">1779</span> I ActivityTaskManager: Displayed com.maxim.wordcard.free/com.maxim.wordcard.MainActivity <span class="token keyword">for</span> user <span class="token number">0</span>: +661ms</pre></td></tr></table></figure><ul><li>wm_task_created ： 创建 WordCard 所在的 Task。</li><li>wm_create_activity： WMS 创建好 WordCard 的 MainActivity。</li><li>wm_on_create_called： Activity 执行 onCreate 完成后，通知 WMS 生命周期回调完成。</li><li>Displayed： 启动 com.maxim.wordcard.free 耗时 661ms。</li></ul><h1 id="activity-启动耗时"><a class="anchor" href="#activity-启动耗时">#</a> Activity 启动耗时</h1><pre><code class="language-Bash">ActivityTaskManager: Displayed com.google.android.dialer/.extensions.GoogleDialtactsActivity for user 0: +514ms
</code></pre><h1 id="安装-apk"><a class="anchor" href="#安装-apk">#</a> 安装 apk</h1><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb <span class="token function">install</span> -r fileName.apk</pre></td></tr></table></figure><ul><li>-b : Back up any existing files before overwriting them by renaming them to file.old. See -B for specifying a different backup suffix.</li></ul><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb push fileName.apk remote</pre></td></tr></table></figure><h1 id="应用卸载"><a class="anchor" href="#应用卸载">#</a> 应用卸载</h1><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell pm uninstall com.example.MyApp</pre></td></tr></table></figure><h1 id="adb启动activity"><a class="anchor" href="#adb启动activity">#</a> adb 启动 activity</h1><p>Call activity manager</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ adb shell am start -n ｛包<span class="token punctuation">(</span>package<span class="token punctuation">)</span>名｝/｛包名｝.<span class="token punctuation">&#123;</span>活动<span class="token punctuation">(</span>activity<span class="token punctuation">)</span>名称<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>如：启动浏览器</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell am start -n com.android.systemui/com.android.browser.BrowserActivity --ei x <span class="token number">1</span> --ei y <span class="token number">2</span></pre></td></tr></table></figure><ul><li>ei : Intent 携带整型参数 x = 1 &amp; y = 2.</li></ul><p>携带启动参数见：Specification for intent arguments 一节</p><h1 id="adb启动service"><a class="anchor" href="#adb启动service">#</a> adb 启动 service</h1><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ adb shell am start <span class="token function">service</span> -n ｛包<span class="token punctuation">(</span>package<span class="token punctuation">)</span>名｝/｛包名｝.<span class="token punctuation">&#123;</span>服务<span class="token punctuation">(</span>service<span class="token punctuation">)</span>名称<span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>如：启动自己应用中一个 service</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell am startservice -n com.android.traffic/com.android.traffic.maniservice</pre></td></tr></table></figure><p>携带启动参数见：Specification for intent arguments 一节</p><h1 id="adb发送broadcast"><a class="anchor" href="#adb发送broadcast">#</a> adb 发送 broadcast</h1><p>$ adb shell $ am broadcast -a &lt;广播动作&gt; 如：发送一个网络变化的广播</p><pre><code>adb shell am broadcast -a android.net.conn.CONNECTIVITY_CHANGE
</code></pre><p>携带启动参数见：Specification for intent arguments 一节</p><h1 id="清空应用的文件包含数据库和-sharepreference"><a class="anchor" href="#清空应用的文件包含数据库和-sharepreference">#</a> 清空应用的文件，包含数据库和 SharePreference</h1><p>Call package manager</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell pm <span class="token function">clear</span> package</pre></td></tr></table></figure><h1 id="copy-files-to-and-from-a-device"><a class="anchor" href="#copy-files-to-and-from-a-device">#</a> Copy files to and from a device</h1><p>To copy a file or directory and its sub-directories <em>from</em> the device, do the following:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb pull remote <span class="token builtin class-name">local</span></pre></td></tr></table></figure><p>To copy a file or directory and its sub-directories <em>to</em> the device, do the following:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb push <span class="token builtin class-name">local</span> remote</pre></td></tr></table></figure><p>Replace  <code>local</code>  and  <code>remote</code>  with the paths to the target files/directory on your development machine (local) and on the device (remote). For example:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb push myfile.txt /sdcard/myfile.txt</pre></td></tr></table></figure><p>示例：截屏</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell screencap -p /sdcard/screenshot.png</pre></td></tr><tr><td data-num="2"></td><td><pre>adb pull /sdcard/screenshot.png</pre></td></tr></table></figure><ul><li>第一条命令在设备上截屏并保存到 /sdcard/screenshot.png。</li><li>第二条命令将截屏文件从设备拉取到本地。</li></ul><h1 id="call-package-manager-pm"><a class="anchor" href="#call-package-manager-pm">#</a> Call package manager (pm)</h1><p>Within an adb shell, you can issue commands with the package manager (pm) tool to perform actions and queries on app packages installed on the device.</p><p>While in a shell, the pm syntax is:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>pm <span class="token builtin class-name">command</span></pre></td></tr></table></figure><p>You can also issue a package manager command directly from adb without entering a remote shell. For example:</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>install [options] path</td><td>Install a package, specified by path, to the system.<br>Options:<br><br><code>-r</code> : Reinstall an existing app, keeping its data.<br><code>-t</code> : Allow test APKs to be installed. Gradle generates a test APK when you have only run or debugged your app or have used the Android Studio Build &gt; Build APK command. If the APK is built using a developer preview SDK, you must include the -t option with the install command if you are installing a test APK.<br><code>-d</code> : Allow version code downgrade.</td></tr><tr><td>uninstall [options] package</td><td>Removes a package from the system.<br>Options:<br><br>-k: Keep the data and cache directories after package removal.</td></tr><tr><td>clear package</td><td>Delete all data associated with a package.</td></tr></tbody></table><h1 id="take-a-screenshot"><a class="anchor" href="#take-a-screenshot">#</a> Take a screenshot</h1><p>The screencap command is a shell utility for taking a screenshot of a device display.</p><p>While in a shell, the screencap syntax is:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>screencap filename</pre></td></tr></table></figure><p>To use screencap from the command line, enter the following:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell screencap /sdcard/screen.png</pre></td></tr></table></figure><p>Here's an example screenshot session, using the adb shell to capture the screenshot and the pull command to download the file from the device:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ adb shell</pre></td></tr><tr><td data-num="2"></td><td><pre>shell@ $ screencap /sdcard/screen.png</pre></td></tr><tr><td data-num="3"></td><td><pre>shell@ $ <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ adb pull /sdcard/screen.png</pre></td></tr></table></figure><h1 id="record-a-video"><a class="anchor" href="#record-a-video">#</a> Record a video</h1><p>The screenrecord command is a shell utility for recording the display of devices running Android 4.4 (API level 19) and higher. The utility records screen activity to an MPEG-4 file. You can use this file to create promotional or training videos or for debugging and testing.</p><p>In a shell, use the following syntax:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>screenrecord <span class="token punctuation">[</span>options<span class="token punctuation">]</span> filename</pre></td></tr></table></figure><p>To use screenrecord from the command line, enter the following:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>adb shell screenrecord /sdcard/demo.mp4</pre></td></tr></table></figure><p>Stop the screen recording by pressing Control+C. Otherwise, the recording stops automatically at three minutes or the time limit set by --time-limit.</p><p>To begin recording your device screen, run the screenrecord command to record the video. Then, run the pull command to download the video from the device to the host computer. Here's an example recording session:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ adb shell</pre></td></tr><tr><td data-num="2"></td><td><pre>shell@ $ screenrecord --verbose /sdcard/demo.mp4</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">(</span>press Control + C to stop<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>shell@ $ <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="5"></td><td><pre>$ adb pull /sdcard/demo.mp4</pre></td></tr></table></figure><p>The screenrecord utility can record at any supported resolution and bit rate you request, while retaining the aspect ratio of the device display. The utility records at the native display resolution and orientation by default, with a maximum length of three minutes.</p><p>Limitations of the screenrecord utility:</p><ul><li>Audio is not recorded with the video file.</li><li>Video recording is not available for devices running Wear OS.</li><li>Some devices might not be able to record at their native display resolution. If you encounter problems with screen recording, try using a lower screen resolution.</li><li>Rotation of the screen during recording is not supported. If the screen does rotate during recording, some of the screen is cut off in the recording.</li></ul><p>Table 4. screenrecord options</p><table><thead><tr><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>--help</td><td>Display command syntax and options</td></tr><tr><td>--size widthxheight</td><td>Set the video size: 1280x720. The default value is the device's native display resolution (if supported), 1280x720 if not. For best results, use a size supported by your device's Advanced Video Coding (AVC) encoder.</td></tr><tr><td>--bit-rate rate</td><td>Set the video bit rate for the video, in megabits per second. The default value is 20Mbps. You can increase the bit rate to improve video quality, but doing so results in larger movie files. The following example sets the recording bit rate to 6Mbps:<br><code>screenrecord --bit-rate 6000000 /sdcard/demo.mp4</code></td></tr><tr><td>--time-limit time</td><td>Set the maximum recording time, in seconds. The default and maximum value is 180 (3 minutes).</td></tr><tr><td>--rotate</td><td>Rotate the output 90 degrees. This feature is experimental.</td></tr><tr><td>--verbose</td><td>Display log information on the command-line screen. If you do not set this option, the utility does not display any information while running.</td></tr></tbody></table><h1 id="specification-for-intent-arguments"><a class="anchor" href="#specification-for-intent-arguments">#</a> Specification for intent arguments</h1><p>For activity manager commands that take an  <code>intent</code>  argument, you can specify the intent with the following options:</p><p><code>-a action</code></p><p>Specify the intent action, such as  <code>android.intent.action.VIEW</code> . You can declare this only once.</p><p><code>-d data_uri</code></p><p>Specify the intent data URI, such as  <code>content://contacts/people/1</code> . You can declare this only once.</p><p><code>-t mime_type</code></p><p>Specify the intent MIME type, such as  <code>image/png</code> . You can declare this only once.</p><p><code>-c category</code></p><p>Specify an intent category, such as  <code>android.intent.category.APP_CONTACTS</code> .</p><p><code>-n component</code></p><p>Specify the component name with package name prefix to create an explicit intent, such as  <code>com.example.app/.ExampleActivity</code> .</p><p><code>-f flags</code></p><p>Add flags to the intent, as supported by  <code>[setFlags()](https://developer.android.com/reference/android/content/Intent#setFlags(int))</code> .</p><p><code>--esn extra_key</code></p><p>Add a null extra. This option is not supported for URI intents.</p><p><code>-e | --es extra_key extra_string_value</code></p><p>Add string data as a key-value pair.</p><p><code>--ez extra_key extra_boolean_value</code></p><p>Add boolean data as a key-value pair.</p><p><code>--ei extra_key extra_int_value</code></p><p>Add integer data as a key-value pair.</p><p><code>--el extra_key extra_long_value</code></p><p>Add long data as a key-value pair.</p><p><code>--ef extra_key extra_float_value</code></p><p>Add float data as a key-value pair.</p><p><code>--eu extra_key extra_uri_value</code></p><p>Add URI data as a key-value pair.</p><p><code>--ecn extra_key extra_component_name_value</code></p><p>Add a component name, which is converted and passed as a  <code>[ComponentName](https://developer.android.com/reference/android/content/ComponentName)</code>  object.</p><p><code>--eia extra_key extra_int_value[,extra_int_value...]</code></p><p>Add an array of integers.</p><p><code>--ela extra_key extra_long_value[,extra_long_value...]</code></p><p>Add an array of longs.</p><p><code>--efa extra_key extra_float_value[,extra_float_value...]</code></p><p>Add an array of floats.</p><p><code>--grant-read-uri-permission</code></p><p>Include the flag  <code>[FLAG_GRANT_READ_URI_PERMISSION](https://developer.android.com/reference/android/content/Intent#FLAG_GRANT_READ_URI_PERMISSION)</code> .</p><p><code>--grant-write-uri-permission</code></p><p>Include the flag  <code>[FLAG_GRANT_WRITE_URI_PERMISSION](https://developer.android.com/reference/android/content/Intent#FLAG_GRANT_WRITE_URI_PERMISSION)</code> .</p><p><code>--debug-log-resolution</code></p><p>Include the flag  <code>[FLAG_DEBUG_LOG_RESOLUTION](https://developer.android.com/reference/android/content/Intent#FLAG_DEBUG_LOG_RESOLUTION)</code> .</p><p><code>--exclude-stopped-packages</code></p><p>Include the flag  <code>[FLAG_EXCLUDE_STOPPED_PACKAGES](https://developer.android.com/reference/android/content/Intent#FLAG_EXCLUDE_STOPPED_PACKAGES)</code> .</p><p><code>--include-stopped-packages</code></p><p>Include the flag  <code>[FLAG_INCLUDE_STOPPED_PACKAGES](https://developer.android.com/reference/android/content/Intent#FLAG_INCLUDE_STOPPED_PACKAGES)</code> .</p><p><code>--activity-brought-to-front</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_BROUGHT_TO_FRONT](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_BROUGHT_TO_FRONT)</code> .</p><p><code>--activity-clear-top</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_CLEAR_TOP](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_CLEAR_TOP)</code> .</p><p><code>--activity-clear-when-task-reset</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET)</code> .</p><p><code>--activity-exclude-from-recents</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)</code> .</p><p><code>--activity-launched-from-history</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY)</code> .</p><p><code>--activity-multiple-task</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_MULTIPLE_TASK](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_MULTIPLE_TASK)</code> .</p><p><code>--activity-no-animation</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_NO_ANIMATION](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_NO_ANIMATION)</code> .</p><p><code>--activity-no-history</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_NO_HISTORY](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_NO_HISTORY)</code> .</p><p><code>--activity-no-user-action</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_NO_USER_ACTION](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_NO_USER_ACTION)</code> .</p><p><code>--activity-previous-is-top</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_PREVIOUS_IS_TOP](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_PREVIOUS_IS_TOP)</code> .</p><p><code>--activity-reorder-to-front</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_REORDER_TO_FRONT](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_REORDER_TO_FRONT)</code> .</p><p><code>--activity-reset-task-if-needed</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_RESET_TASK_IF_NEEDED](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_RESET_TASK_IF_NEEDED)</code> .</p><p><code>--activity-single-top</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_SINGLE_TOP](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_SINGLE_TOP)</code> .</p><p><code>--activity-clear-task</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_CLEAR_TASK](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_CLEAR_TASK)</code> .</p><p><code>--activity-task-on-home</code></p><p>Include the flag  <code>[FLAG_ACTIVITY_TASK_ON_HOME](https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_TASK_ON_HOME)</code> .</p><p><code>--receiver-registered-only</code></p><p>Include the flag  <code>[FLAG_RECEIVER_REGISTERED_ONLY](https://developer.android.com/reference/android/content/Intent#FLAG_RECEIVER_REGISTERED_ONLY)</code> .</p><p><code>--receiver-replace-pending</code></p><p>Include the flag  <code>[FLAG_RECEIVER_REPLACE_PENDING](https://developer.android.com/reference/android/content/Intent#FLAG_RECEIVER_REPLACE_PENDING)</code> .</p><p><code>--selector</code></p><p>Requires the use of  <code>-d</code>  and  <code>-t</code>  options to set the intent data and type.</p><div class="tags"><a href="/limxtop/tags/Android-adb-egrep-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C/" rel="tag"><i class="ic i-tag"></i> Android, adb, egrep, 正则表达式，</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2025-04-26 16:09:57" itemprop="dateModified" datetime="2025-04-26T16:09:57+08:00">2025-04-26</time> </span><span id="2025/02/16/Android-command/" class="item leancloud_visitors" data-flag-title="Android 提升开发效率常用命令指南" title="Views"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">Views</span> <span class="leancloud-visitors-count"></span> <span class="text">times</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/limxtop/images/wechatpay.png" alt="文理兼修电脑首席 WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/limxtop/images/alipay.png" alt="文理兼修电脑首席 Alipay"><p>Alipay</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>文理兼修电脑首席 <i class="ic i-at"><em>@</em></i>若批评不自由，则赞美无意义</li><li class="link"><strong>Post link: </strong><a href="https://limxtop1989.github.io/limxtop/2025/02/16/Android-command/" title="Android 提升开发效率常用命令指南">https://limxtop1989.github.io/limxtop/2025/02/16/Android-command/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/limxtop/2024/05/19/take-part-in/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;a11995a8254fd4a4038ba59f6bcf5a89.jpg" title="置身事内读书笔记"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i></span><h3>置身事内读书笔记</h3></a></div><div class="item right"><a href="/limxtop/2025/04/19/mirror-bitmap/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;20179998b27b569ef4634293516e8d09.jpg" title="Android镜像翻转Bitmap详解"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i></span><h3>Android镜像翻转Bitmap详解</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#log-%E8%BF%87%E6%BB%A4%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.</span> <span class="toc-text">Log 过滤查询</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%9B%BF%E6%8D%A2"><span class="toc-number">3.</span> <span class="toc-text">文本替换</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D-resume-%E7%9A%84-activity"><span class="toc-number">4.</span> <span class="toc-text">查看当前 resume 的 Activity</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D-resume-%E7%9A%84-fragment"><span class="toc-number">5.</span> <span class="toc-text">查看当前 resume 的 Fragment</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-activity-%E5%90%AF%E5%8A%A8%E8%B0%83%E5%BA%A6%E6%B5%81%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">查看 Activity 启动调度流程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#activity-%E5%90%AF%E5%8A%A8%E8%80%97%E6%97%B6"><span class="toc-number">7.</span> <span class="toc-text">Activity 启动耗时</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-apk"><span class="toc-number">8.</span> <span class="toc-text">安装 apk</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%8D%B8%E8%BD%BD"><span class="toc-number">9.</span> <span class="toc-text">应用卸载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#adb%E5%90%AF%E5%8A%A8activity"><span class="toc-number">10.</span> <span class="toc-text">adb 启动 activity</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#adb%E5%90%AF%E5%8A%A8service"><span class="toc-number">11.</span> <span class="toc-text">adb 启动 service</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#adb%E5%8F%91%E9%80%81broadcast"><span class="toc-number">12.</span> <span class="toc-text">adb 发送 broadcast</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B8%85%E7%A9%BA%E5%BA%94%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C-sharepreference"><span class="toc-number">13.</span> <span class="toc-text">清空应用的文件，包含数据库和 SharePreference</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#copy-files-to-and-from-a-device"><span class="toc-number">14.</span> <span class="toc-text">Copy files to and from a device</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#call-package-manager-pm"><span class="toc-number">15.</span> <span class="toc-text">Call package manager (pm)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#take-a-screenshot"><span class="toc-number">16.</span> <span class="toc-text">Take a screenshot</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#record-a-video"><span class="toc-number">17.</span> <span class="toc-text">Record a video</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#specification-for-intent-arguments"><span class="toc-number">18.</span> <span class="toc-text">Specification for intent arguments</span></a></li></ol></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/limxtop/2021/07/17/activity-transfer-detection/" rel="bookmark" title="Activity 转移类型检测">Activity 转移类型检测</a></li><li><a href="/limxtop/2021/09/19/ViewModel/" rel="bookmark" title="ViewModel源码剖析">ViewModel源码剖析</a></li><li><a href="/limxtop/2022/07/24/Android-animation-principles/" rel="bookmark" title="Android 动画原理">Android 动画原理</a></li><li><a href="/limxtop/2022/08/19/android-touch-event/" rel="bookmark" title="Android 触摸事件派发">Android 触摸事件派发</a></li><li><a href="/limxtop/2023/02/04/android-message-loop/" rel="bookmark" title="Android消息循环">Android消息循环</a></li><li><a href="/limxtop/2023/03/11/canvas-graphic-transform/" rel="bookmark" title="Android 双指触控 位移 缩放 旋转">Android 双指触控 位移 缩放 旋转</a></li><li><a href="/limxtop/2023/08/06/AndroidX-migrate/" rel="bookmark" title="穿山甲集成报错">穿山甲集成报错</a></li><li class="active"><a href="/limxtop/2025/02/16/Android-command/" rel="bookmark" title="Android 提升开发效率常用命令指南">Android 提升开发效率常用命令指南</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="文理兼修电脑首席" data-src="/limxtop/images/avatar.jpg"><p class="name" itemprop="name">文理兼修电脑首席</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/limxtop/archives/"><span class="count">36</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/limxtop/categories/"><span class="count">3</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/limxtop/tags/"><span class="count">28</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9saW14dG9w" title="https:&#x2F;&#x2F;twitter.com&#x2F;limxtop"><i class="ic i-twitter"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmxpbXh0b3BAZ21haWwuY29t" title="mailto:limxtop@gmail.com"><i class="ic i-envelope"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9saW14dG9w" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;limxtop"><i class="ic i-stack-overflow"></i></span> <span class="exturl item youtube" data-url="aHR0cHM6Ly95b3V0dWJlLmNvbS9saW14dG9w" title="https:&#x2F;&#x2F;youtube.com&#x2F;limxtop"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/limxtop/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/limxtop/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/limxtop/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/limxtop/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/limxtop/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/limxtop/2024/05/19/take-part-in/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/limxtop/2025/04/19/mirror-bitmap/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/limxtop/categories/android/" title="In Android">Android</a></div><span><a href="/limxtop/2023/08/06/AndroidX-migrate/" title="穿山甲集成报错">穿山甲集成报错</a></span></li><li class="item"><div class="breadcrumb"><a href="/limxtop/categories/android/" title="In Android">Android</a></div><span><a href="/limxtop/2022/07/24/Android-animation-principles/" title="Android 动画原理">Android 动画原理</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2023/07/29/semaphore/" title="Semaphore">Semaphore</a></span></li><li class="item"><div class="breadcrumb"><a href="/limxtop/categories/%E6%9D%82%E8%B0%88/" title="In Essay">Essay</a></div><span><a href="/limxtop/2021/08/18/English-introduction/" title="英语自学">英语自学</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2024/01/25/squat-down-to-pee/" title="姐妹们，家里的男人尿脏马桶，怎么办">姐妹们，家里的男人尿脏马桶，怎么办</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2023/07/08/Representing-and-Manipulating-Information/" title="数字在计算机的表示和操作">数字在计算机的表示和操作</a></span></li><li class="item"><div class="breadcrumb"><a href="/limxtop/categories/%E6%9D%82%E8%B0%88/" title="In Essay">Essay</a></div><span><a href="/limxtop/2023/11/11/Google-Play-Store-In-App-Billing/" title="Google Play Store In App Billing Issue">Google Play Store In App Billing Issue</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2023/07/30/RxJava-Schedule/" title="RxJava Schedule">RxJava Schedule</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2021/10/18/FragmentManagerV1/" title="FragmentManager源码剖析一">FragmentManager源码剖析一</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/limxtop/2024/05/19/take-part-in/" title="置身事内读书笔记">置身事内读书笔记</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">文理兼修电脑首席 @ Yume Shoka</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">227k words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">3:26</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2025/02/16/Android-command/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/limxtop/js/app.js?v=0.2.5"></script></body></html>